<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
						"http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="board_mapper">

	<!-- 게시글 상세페이지 호출과 조회수 업데이트 -->
	<!-- 글상세 불러오기 -->
	<select id="select_findPostById" parameterType="int" resultType="BoardDto">
		SELECT * 
<<<<<<< HEAD
		FROM join_board
 		WHERE plan_id = #{planId}
=======
			FROM join_board
 			WHERE PLAN_ID = #{planId} 
>>>>>>> dcb72b8b0c0a421d62435665e8382dc0b8dd380b
 	</select>
 	<!-- 조회수 업데이트  -->
 	<update id="">
 		UPDATE join_board
 			SET VIEWS = NVL(VIEWS,0) + 1
 		WHERE PLAN_ID = #{planId} 
 	</update>
 	<!-- 게시글 상세페이지 호출과 조회수 업데이트 -->
 
 	<!-- 여행팀 신청하기 -->
		<!-- 모집인원 테이블에 받아온 게시글 번호(plan_id)와 회원아이디(user_id) 입력-->
	<insert	id="insert_joinParty" parameterType="BoardDto"> 
		INSERT INTO join_board_party (plan_id, user_id)
		VALUES (planId, userId)  
	</insert>	
 
 
 	<!-- 여행팀 멤버 조회 -->
	<select	id="select_myTeamDetail" resultType="BoardDto">
		  SELECT p.plan_id, p.user_id
		  FROM join_board_party p
		  WHERE p.plan_id = #{planId}
		  GROUP BY p.plan_id, p.user_id
		  ORDER BY plan_id, user_id
	</select> 
 
 
 
 
 
 
 
 
 
 	<!--  게시판 상세보기시 조회수 증가 -->
	<!--	<update id="update_joinBoardViewIncrease" parameterType="BoardDto">  
			UPDATE join_board
			SET views = views +1 
			WHERE plan_id= #{planId} 
	</update> -->	
	
</mapper>	